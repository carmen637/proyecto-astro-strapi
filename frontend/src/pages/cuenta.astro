---

import Layout from '../layouts/Layout.astro';
---

<Layout>
  <section class="min-h-screen bg-gradient-to-b from-[#0B0F2A] to-[#050814] py-24">
    <div class="max-w-3xl mx-auto px-6">

      <!-- Contenido para usuarios logueados -->
      <div id="contenido-cuenta" class="hidden">
        <h1 class="text-white mb-4">
          Bienvenido, <span class="text-[#FACC15]" id="nombre-usuario"></span>
        </h1>
        <p class="text-gray-400 mb-16">Tu espacio personal en Biblioteca Arcana</p>

        <!-- Tarjetas de info -->
        <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-12">
          <div class="bg-[#111827] rounded-xl p-6 border border-white/10">
            <h3 class="text-[#FACC15] mb-2">Email</h3>
            <p class="text-gray-300" id="email-usuario"></p>
          </div>
          <div class="bg-[#111827] rounded-xl p-6 border border-white/10">
            <h3 class="text-[#FACC15] mb-2">Usuario</h3>
            <p class="text-gray-300" id="username-usuario"></p>
          </div>
        </div>

        <!-- Contenido exclusivo -->
        <div class="bg-[#111827] rounded-xl p-8 border border-[#FACC15]/30 mb-12">
          <h2 class="text-white mb-4">✦ Contenido Exclusivo</h2>
          <p class="text-gray-400 mb-6">Como miembro de Arcana tienes acceso a recomendaciones personalizadas y rituales exclusivos.</p>
          <a href="/blog" class="border border-[#FACC15] text-[#FACC15] hover:bg-[#FACC15] hover:text-black px-6 py-2 rounded-lg transition font-semibold text-sm">
            Ver artículos exclusivos
          </a>
        </div>

        <button 
          id="btn-logout"
          class="border border-red-500 text-red-400 hover:bg-red-500 hover:text-white px-6 py-2 rounded-lg transition font-semibold text-sm"
        >
          Cerrar sesión
        </button>
      </div>

      <!-- Redirigir si no está logueado -->
      <div id="no-autenticado" class="hidden text-center py-24">
        <p class="text-gray-400 text-xl mb-8">Debes iniciar sesión para acceder a esta página.</p>
        <a href="/login" class="bg-[#FACC15] text-black font-bold px-8 py-3 rounded-lg hover:bg-[#D4AF37] transition">
          Iniciar sesión
        </a>
      </div>

    </div>
  </section>
</Layout>

<script>
  const token = localStorage.getItem('token');
  const usuario = JSON.parse(localStorage.getItem('usuario') || 'null');

  if (token && usuario) {
    document.getElementById('contenido-cuenta').classList.remove('hidden');
    document.getElementById('nombre-usuario').textContent = usuario.username;
    document.getElementById('email-usuario').textContent = usuario.email;
    document.getElementById('username-usuario').textContent = usuario.username;
  } else {
    document.getElementById('no-autenticado').classList.remove('hidden');
  }

  document.getElementById('btn-logout')?.addEventListener('click', () => {
    localStorage.removeItem('token');
    localStorage.removeItem('usuario');
    window.location.href = '/';
  });
</script>